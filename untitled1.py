# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/15uaJC3G8xNBYDcG-IzZA-aQMrBWgjP5T
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score, mean_absolute_error, mean_squared_error
import os

file_name = "salary_data.csv"

if not os.path.exists(file_name):
    print("CSV file not found — creating dataset...")
    data = {
        'YearsExperience': [1.1, 1.3, 1.5, 2.0, 2.2, 2.9, 3.0, 3.2, 3.7, 3.9,
                            4.0, 4.1, 4.5, 4.9, 5.1, 5.3, 5.9, 6.0, 6.2, 6.5,
                            6.8, 7.1, 7.3, 7.9, 8.2, 8.4, 8.7, 8.9, 9.1, 9.3,
                            9.6, 9.9, 10.1, 10.3, 10.5, 10.7, 10.9, 11.2, 11.5, 11.8,
                            12.0, 12.3, 12.5, 12.7, 12.9, 13.1, 13.4, 13.6, 13.8, 14.0],
        'Age': [23, 24, 25, 26, 26, 27, 28, 28, 29, 30,
                30, 31, 32, 32, 33, 33, 34, 35, 35, 36,
                36, 37, 37, 38, 39, 39, 40, 40, 41, 41,
                42, 43, 43, 44, 44, 45, 45, 46, 46, 47,
                47, 48, 48, 49, 49, 50, 50, 51, 52, 52],
        'Salary': [39000, 41000, 42000, 45000, 46000, 49000, 50000, 52000, 54000, 56000,
                   57000, 58000, 60000, 61000, 63000, 64000, 67000, 68000, 70000, 72000,
                   74000, 75000, 76000, 80000, 82000, 83000, 85000, 87000, 88000, 90000,
                   92000, 94000, 95000, 97000, 98000, 100000, 102000, 104000, 106000, 108000,
                   110000, 112000, 113000, 115000, 117000, 119000, 121000, 123000, 125000, 127000]
    }
    df = pd.DataFrame(data)
    df.to_csv(file_name, index=False)
else:
    df = pd.read_csv(file_name)

print("Dataset preview:")
print(df.head())

X = df[['YearsExperience', 'Age']]
y = df['Salary']

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

model = LinearRegression()
model.fit(X_train, y_train)

y_pred = model.predict(X_test)

print("\nModel Evaluation:")
print("R² Score:", r2_score(y_test, y_pred))
print("MAE:", mean_absolute_error(y_test, y_pred))
print("MSE:", mean_squared_error(y_test, y_pred))
print("RMSE:", np.sqrt(mean_squared_error(y_test, y_pred)))

print("\nModel Coefficients:")
print("Intercept:", model.intercept_)
print("Coefficients (YearsExperience, Age):", model.coef_)

comparison = pd.DataFrame({'Actual': y_test, 'Predicted': y_pred})
print("\nActual vs Predicted:")
print(comparison.head())

plt.scatter(df['YearsExperience'], df['Salary'], color='blue', label='Actual Data')
plt.plot(X_test['YearsExperience'], y_pred, color='red', linewidth=2, label='Predicted Line')
plt.xlabel("Years of Experience")
plt.ylabel("Salary (USD)")
plt.title("Salary Prediction using Linear Regression")
plt.legend()
plt.show()

X = df[['YearsExperience']]
y = df['Salary']

# Train model again
model = LinearRegression()
model.fit(X, y)

# Predict salary from experience input
experience = float(input("Enter Years of Experience to predict salary: "))
predicted_salary = model.predict([[experience]])

print(f"\nPredicted Salary for {experience} years of experience: ${predicted_salary[0]:.2f}")